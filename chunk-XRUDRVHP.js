import{g as X}from"./chunk-D2XRRBRP.js";import{h as ae}from"./chunk-OZECPP75.js";import"./chunk-54PG2AAV.js";import"./chunk-EBCVRUKI.js";import{a as Y,d as J,f as ee,g as te,i as ne,j as ie}from"./chunk-BJM7LMXK.js";import{b as q,e as Z,h as K,r as $,x as G}from"./chunk-LT2PDRQ3.js";import{a as oe,b as re,c as se,d as le,e as ce,f as de,g as pe,h as me,i as ue,j as he,k as ge}from"./chunk-PZNYEYD6.js";import"./chunk-S5WO7LK6.js";import{a as F,b as V,d as j}from"./chunk-T4H2DEYZ.js";import{Aa as g,Ba as f,Bc as Q,Cc as B,Da as M,Db as O,Dc as U,E as b,Ec as W,Fa as x,Ga as c,K as u,L as h,Mb as H,Ob as R,Qa as o,Ra as _,Sa as m,Wa as k,Xa as P,Ya as D,_ as s,ca as y,ga as S,ha as C,la as d,nc as N,pa as p,pb as T,ra as E,sb as A,xa as a,xc as L,ya as i,yb as I,za as w,zc as z}from"./chunk-7I6J3OSZ.js";var xe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=C({type:e});static \u0275inj=b({})}return e})();var _e=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=C({type:e});static \u0275inj=b({imports:[N,xe,G]})}return e})();function we(e,n){if(e&1&&(a(0,"div",23)(1,"h3"),o(2),i(),a(3,"p")(4,"strong"),o(5,"Credit Rating:"),i(),o(6),i(),a(7,"p")(8,"strong"),o(9,"Skills:"),i(),o(10),i(),a(11,"p")(12,"strong"),o(13,"Skill Points Formula:"),i(),o(14),i(),a(15,"p")(16,"strong"),o(17,"Available Skill Points:"),i(),o(18),i()()),e&2){let t=c(2);s(2),_(t.selectedOccupation.name),s(4),m(" ",t.getCreditRatingString(t.selectedOccupation),""),s(4),m(" ",t.getSkillsString(t.selectedOccupation),""),s(4),m(" ",t.selectedOccupation.skillPointsFormula,""),s(4),m(" ",t.character.remainingSkillPoints,"")}}function Me(e,n){e&1&&(a(0,"div",24)(1,"p"),o(2,"No occupation selected. Please choose one from the list below."),i()())}function Se(e,n){if(e&1){let t=M();a(0,"button",25),x("click",function(){u(t);let l=c(2);return l.searchTerm="",h(l.filterOccupations())}),a(1,"mat-icon"),o(2,"close"),i()()}}function Ee(e,n){e&1&&(a(0,"th",26),o(1,"Occupation"),i())}function Oe(e,n){if(e&1&&(a(0,"td",27),o(1),i()),e&2){let t=n.$implicit;s(),_(t.name)}}function ke(e,n){e&1&&(a(0,"th",26),o(1,"Credit Rating"),i())}function Pe(e,n){if(e&1&&(a(0,"td",27),o(1),i()),e&2){let t=n.$implicit,r=c(2);s(),_(r.getCreditRatingString(t))}}function De(e,n){e&1&&(a(0,"th",26),o(1,"Skills"),i())}function Te(e,n){if(e&1&&(a(0,"td",28),o(1),i()),e&2){let t=n.$implicit,r=c(2);s(),_(r.getSkillsString(t))}}function Ae(e,n){e&1&&(a(0,"th",26),o(1,"Points"),i())}function Ie(e,n){if(e&1&&(a(0,"td",27),o(1),a(2,"span",29),o(3),i()()),e&2){let t=n.$implicit,r=c(2);s(),m(" ",t.skillPointsFormula," "),s(2),m("(",r.getSkillPointsValue(t),")")}}function He(e,n){e&1&&(a(0,"th",26),o(1,"Action"),i())}function Re(e,n){if(e&1){let t=M();a(0,"td",27)(1,"button",30),x("click",function(){let l=u(t).$implicit,v=c(2);return h(v.selectOccupation(l))}),o(2," Select "),i()()}}function Ne(e,n){e&1&&w(0,"tr",31)}function Fe(e,n){if(e&1&&w(0,"tr",32),e&2){let t=n.$implicit,r=c(2);E("selected-row",r.selectedOccupation&&r.selectedOccupation.name===t.name)}}function Ve(e,n){if(e&1){let t=M();a(0,"div",1)(1,"h1",2),o(2,"Choose Occupation"),i(),a(3,"mat-card")(4,"mat-card-content")(5,"h2"),o(6,"Selected Occupation"),i(),d(7,we,19,5,"div",3)(8,Me,3,0,"div",4),i()(),a(9,"mat-card")(10,"mat-card-content")(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),o(14,"Search Occupations"),i(),a(15,"input",7),D("ngModelChange",function(l){u(t);let v=c();return P(v.searchTerm,l)||(v.searchTerm=l),h(l)}),x("keyup",function(){u(t);let l=c();return h(l.filterOccupations())}),i(),d(16,Se,3,0,"button",8),i()(),a(17,"div",9)(18,"table",10),g(19,11),d(20,Ee,2,0,"th",12)(21,Oe,2,1,"td",13),f(),g(22,14),d(23,ke,2,0,"th",12)(24,Pe,2,1,"td",13),f(),g(25,15),d(26,De,2,0,"th",12)(27,Te,2,1,"td",16),f(),g(28,17),d(29,Ae,2,0,"th",12)(30,Ie,4,2,"td",13),f(),g(31,18),d(32,He,2,0,"th",12)(33,Re,3,0,"td",13),f(),d(34,Ne,1,0,"tr",19)(35,Fe,1,2,"tr",20),i()()()(),a(36,"div",21)(37,"button",22),x("click",function(){u(t);let l=c();return h(l.saveAndContinue())}),o(38," Save and Continue "),i()()()}if(e&2){let t=c();s(7),p("ngIf",t.selectedOccupation),s(),p("ngIf",!t.selectedOccupation),s(7),k("ngModel",t.searchTerm),s(),p("ngIf",t.searchTerm),s(2),p("dataSource",t.filteredOccupations),s(16),p("matHeaderRowDef",t.displayedColumns),s(),p("matRowDefColumns",t.displayedColumns),s(2),p("disabled",!t.selectedOccupation)}}var ve=class e{constructor(n,t,r){this.characterService=n;this.derivedStatsService=t;this.router=r}character;occupations=O;filteredOccupations=[...O];selectedOccupation=null;searchTerm="";displayedColumns=["name","creditRating","skills","skillPoints","action"];ngOnInit(){this.characterService.getCharacter().subscribe(n=>{this.character=n,this.character.occupation&&(this.selectedOccupation=this.character.occupation)})}filterOccupations(){if(!this.searchTerm.trim())this.filteredOccupations=[...this.occupations];else{let n=this.searchTerm.toLowerCase();this.filteredOccupations=this.occupations.filter(t=>t.name.toLowerCase().includes(n)||t.skills.some(r=>r.toLowerCase().includes(n)))}}selectOccupation(n){this.character&&(this.selectedOccupation=n,this.characterService.setOccupation(this.character,n))}getSkillPointsValue(n){return this.character?this.derivedStatsService.calculateOccupationSkillPoints(this.character,n).toString():"N/A"}getSkillsString(n){return n.skillsDescription||n.skills.join(", ")}getCreditRatingString(n){return`${n.creditRatingMin}-${n.creditRatingMax}`}saveAndContinue(){this.character&&this.selectedOccupation&&this.router.navigate(["/skills"])}static \u0275fac=function(t){return new(t||e)(y(R),y(H),y(I))};static \u0275cmp=S({type:e,selectors:[["app-occupation-selector"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"section-title"],["class","selected-occupation",4,"ngIf"],["class","no-occupation",4,"ngIf"],[1,"search-container"],[1,"search-field"],["matInput","","placeholder","Filter by name or skills",3,"ngModelChange","keyup","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-container"],["mat-table","",1,"occupation-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","creditRating"],["matColumnDef","skills"],["mat-cell","","class","skills-cell",4,"matCellDef"],["matColumnDef","skillPoints"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected-row",4,"matRowDef","matRowDefColumns"],[1,"actions-container"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"selected-occupation"],[1,"no-occupation"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"skills-cell"],[1,"points-value"],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&d(0,Ve,39,8,"div",0),t&2&&p("ngIf",r.character)},dependencies:[A,T,$,q,Z,K,j,F,V,Q,z,L,_e,U,B,W,X,te,ee,Y,J,ie,ne,ae,ge,oe,se,pe,le,re,me,ce,de,ue,he],styles:[".container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:20px}.selected-occupation[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:15px;border-radius:5px;margin-top:15px}.no-occupation[_ngcontent-%COMP%]{background-color:#ffeeba;padding:15px;border-radius:5px;margin-top:15px}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-field[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.occupation-table[_ngcontent-%COMP%]{width:100%}.skills-cell[_ngcontent-%COMP%]{max-width:300px;white-space:normal;word-wrap:break-word}.points-value[_ngcontent-%COMP%]{color:#512da8;font-weight:700}.selected-row[_ngcontent-%COMP%]{background-color:#ede7f6}.actions-container[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:flex-end}"]})};export{ve as OccupationSelectorComponent};
